function cleanup(){var a=htmlCodeMirror.getValue();if($("#removeFormatting").is(":checked")&&(a=a.replace(/(<[^<>]+) style=["][^"<>]*["]/gi,"$1"),a=a.replace(/(<[^<>]+) style=['][^'<>]*[']/gi,"$1"),a=a.replace(/(<[^<>]+) style=[^'"<> ]+/gi,"$1"),a=a.replace(/(<[^<>]+) class=["][^"<>]*["]/gi,"$1"),a=a.replace(/(<[^<>]+) class=['][^'<>]*[']/gi,"$1"),a=a.replace(/(<[^<>]+) class=[^'"<> ]+/gi,"$1"),a=a.replace(/<style[\s\S]*?<\/style>\s*/gim,"")),$("#removeSpanTags").is(":checked")&&(a=a.replace(/<span[^<>]*>([\s\S]*?)<\/span>/gi,"$1")),$("#removePTags").is(":checked")&&(a=a.replace(/<p(>| [^<>]*>)([\s\S]*?)<\/p>/gi,"$2")),$("#removeIds").is(":checked")&&(a=a.replace(/(<[^<>]+) id=['"][^'"<>]*['"]/gi,"$1")),$("#removeScripts").is(":checked")&&(a=a.replace(/<script[\s\S]*?<\/script>\s*/gi,"")),$("#removeImages").is(":checked")&&(a=a.replace(/<img[^<>]*>\s*/gi,"")),$("#removeLinks").is(":checked")&&(a=a.replace(/<a [\s\S]*?<\/a>\s*/gi,"")),$("#removeTables").is(":checked")&&(a=a.replace(/<table[\s\S]*?<\/table>\s*/gi,"")),$("#removeForms").is(":checked")&&(a=a.replace(/<form[\s\S]*?<\/form>\s*/gi,"")),$("#removeAnyEmptyTag").is(":checked"))do backHtml=a,a=a.replace(/<([a-z0-9]+)[^<>]*><\/\1>\s*/gi,"");while(backHtml.length!==a.length);if($("#removeTagsWithWhitespace").is(":checked"))do backHtml=a,a=a.replace(/<([a-z0-9]+)[^<>]*>(\s|&nbsp;)*<\/\1>\s*/gi,"");while(backHtml.length!==a.length);if($("#removeAllTagAttributes").is(":checked")&&(a=a.replace(/<([a-z0-9]+) [^<>]+>/gi,"<$1>")),$("#removeComments").is(":checked")&&(a=a.replace(/<!--[\s\S]*?-->\s*/gi,"")),$("#removeIframes").is(":checked")&&(a=a.replace(/<iframe[\s\S]*?<\/iframe>\s*/gi,"")),$("#removeEmptyLines").is(":checked")&&(a=a.replace(/[\n\r]{2,}[ ]*/gi,""),a=a.replace(/[\n\r]+[ ]+[\n\r]+/gi,"\n\r")),$("#find").length>0)if($("#useRegex").is(":checked")){var b=new RegExp($("#find").val(),"gi");a=a.replace(b,$("#replace").val())}else a=a.replace($("#find").val(),$("#replace").val());htmlCodeMirror.setValue(a),tinymce.activeEditor.setContent(a)}var htmlCodeMirror,updateTiny=!1;$("document").ready(function(){htmlCodeMirror=CodeMirror.fromTextArea(htmlOutput,{mode:"text/html",lineNumbers:!0,lineWrapping:!0}),htmlCodeMirror.on("change",function(a){updateTiny&&tinymce.activeEditor.setContent(a.getValue())}),htmlCodeMirror.on("focus",function(a){updateTiny=!0}),htmlCodeMirror.on("blur",function(a){updateTiny=!1}),tinymce.init({selector:"textarea.pastedContent",plugins:["advlist autolink lists link image charmap preview anchor","searchreplace visualblocks code","insertdatetime media table contextmenu paste textcolor colorpicker"],toolbar:"insertfile undo redo | styleselect fontsizeselect forecolor backcolor | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",setup:function(a){a.on("change",function(a){updateTiny=!1,htmlCodeMirror.setValue(tinymce.activeEditor.getContent())}),a.on("dirty",function(a){updateTiny=!1,htmlCodeMirror.setValue(tinymce.activeEditor.getContent())}),a.on("undo",function(a){updateTiny=!1,htmlCodeMirror.setValue(tinymce.activeEditor.getContent())}),a.on("redo",function(a){updateTiny=!1,htmlCodeMirror.setValue(tinymce.activeEditor.getContent())}),a.on("init",function(b){htmlCodeMirror.setValue(tinymce.activeEditor.getContent()),$(a.getWin()).bind("resize",function(b){window.innerWidth<1920?htmlCodeMirror.setSize("100%",a.getWin().innerHeight+145):htmlCodeMirror.setSize("100%",a.getWin().innerHeight+112)})})}})});